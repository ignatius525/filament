(this.webpackJsonpfilament=this.webpackJsonpfilament||[]).push([[0],{117:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(4),a=new r.PublicKey("So11111111111111111111111111111111111111112"),o=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),i=(new r.PublicKey("TokenLending1111111111111111111111111111111"),new r.PublicKey("SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8"),[{name:"mainnet-beta"},{name:"testnet"},{name:"devnet"},{name:"localnet"}]),c=function(e){i.find((function(t){return t.name===e}))},u=function(){return{token:o}}},173:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),o=n(280);function i(e){var t=e.message,n=void 0===t?"":t,r=e.description,i=void 0===r?void 0:r,c=e.txid,u=void 0===c?"":c,s=e.type,l=void 0===s?"info":s,f=e.placement,d=void 0===f?"bottomLeft":f;u&&(i=a.a.createElement(a.a.Fragment,null)),o.a[l]({message:a.a.createElement("span",{style:{color:"black"}},n),description:a.a.createElement("span",{style:{color:"black",opacity:.5}},i),placement:d,style:{backgroundColor:"white"}})}},223:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(12),a=n(8),o=n(80),i=function e(t,n,r){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.id=t,this.parser=r,this.isNew=n};i.type="CacheUpdate";var c=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};c.type="CacheUpdate";var u=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};u.type="MarketUpdate";var s=function e(){Object(a.a)(this,e)};s.type="CacheDelete";var l=function(){function e(){Object(a.a)(this,e),this.emitter=new o.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(u.type,e),function(){return t.emitter.removeListener(u.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(i.type,e),function(){return t.emitter.removeListener(i.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(u.type,new u(e))}},{key:"raiseCacheUpdated",value:function(e,t,n){this.emitter.emit(i.type,new i(e,t,n))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(c.type,new c(e))}},{key:"raiseCacheCleared",value:function(){this.emitter.emit(s.type,new s)}}]),e}()},282:function(e,t,n){},34:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return _})),n.d(t,"e",(function(){return L})),n.d(t,"a",(function(){return k})),n.d(t,"d",(function(){return C})),n.d(t,"f",(function(){return R}));var r=n(156),a=n(15),o=n(19),i=n(1),c=n.n(i),u=n(5),s=n(17),l=n(0),f=n.n(l),d=n(58),m=n(4),b=n(83),p=n(53),O=n(223),E=(n(91),n(117)),v=n(55),h=f.a.createContext(null),T=new Map,A=new Map,g=new Map,y=function(t,n){var r=e.from(n.data),a=M(r);return{pubkey:t,account:Object(s.a)({},n),info:a}},w=function(t,n){var r=e.from(n.data),a=D(r);return{pubkey:t,account:Object(s.a)({},n),info:a}},I=new Map,_={emitter:new O.a,query:function(){var e=Object(u.a)(c.a.mark((function e(t,n,r){var a,o,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new m.PublicKey(n):n,o=a.toBase58(),!(i=A.get(o))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(u=T.get(o))){e.next=8;break}return e.abrupt("return",u);case 8:return u=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return _.add(a,e,r)})),T.set(o,u),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n){if(0!==t.data.length){var r="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),a=n||I.get(r);if(!a)throw new Error("Deserializer needs to be registered or passed as a parameter");_.registerParser(e,a),T.delete(r);var o=a(new m.PublicKey(r),t);if(o){var i=!A.has(r);return A.set(r,o),_.emitter.raiseCacheUpdated(r,i,a),o}}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,A.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!A.get(t)&&(A.delete(t),_.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(o.a)(I.keys());try{for(r.s();!(t=r.n()).done;){var a=t.value;I.get(a)===e&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();I.set(n,t)}return e},addTransaction:function(e,t){return g.set(e,t),t},addBulkTransactions:function(e){var t,n=Object(o.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;g.set(r.signature.signature,r)}}catch(a){n.e(a)}finally{n.f()}return e},getTransaction:function(e){return g.get(e)},getAllTransactions:function(){return g},clear:function(){A.clear(),g.clear(),_.emitter.raiseCacheCleared()}},L=function(){return Object(l.useContext)(h)};var S=function(){var e=Object(d.c)(),t=Object(v.b)(),n=t.wallet,r=t.publicKey,o=Object(l.useState)(),i=Object(a.a)(o,2),c=i[0],u=i[1],s=Object(l.useCallback)((function(t){if(e&&r){var n=function(e,t){if(t)return{pubkey:e,account:t,info:{address:e,mint:E.a,owner:e,amount:new b.c(t.lamports),delegate:null,delegatedAmount:new b.c(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}(r,t);if(void 0!==n){var a=r.toBase58();_.registerParser(a,w),A.set(a,n),_.emitter.raiseCacheUpdated(a,!1,w)}}}),[r,e]);return Object(l.useEffect)((function(){e&&r&&(e.getAccountInfo(r).then((function(e){e&&(s(e),u(e))})),e.onAccountChange(r,(function(e){e&&(s(e),u(e))})))}),[u,n,r,e,s]),{nativeAccount:c}},N=new Set,j=function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return N.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(E.b)().token});case 5:e.sent.value.forEach((function(e){_.add(e.pubkey.toBase58(),e.account,w)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function k(e){var t=e.children,n=void 0===t?null:t,r=Object(d.c)(),o=Object(v.b)(),i=o.publicKey,c=o.wallet,u=o.connected,s=Object(l.useState)([]),p=Object(a.a)(s,2),O=p[0],T=p[1],A=Object(l.useState)([]),g=Object(a.a)(A,2),y=g[0],I=g[1],L=S().nativeAccount,k=Object(l.useCallback)((function(){if(!i)return[];var e=i.toBase58();return _.byParser(w).map((function(e){return _.get(e)})).filter((function(t){return t&&t.info.owner.toBase58()===e})).map((function(e){return e}))}),[i]);return Object(l.useEffect)((function(){var e=k().filter((function(e){return void 0!==e}));I(e)}),[L,c,O,k]),Object(l.useEffect)((function(){var e=[];return _.emitter.onCache((function(e){if(e.isNew){var t=e.id,n=e.parser;r.onAccountChange(new m.PublicKey(t),(function(e){_.add(t,e,n)}))}})),function(){e.forEach((function(e){return r.removeAccountChangeListener(e)}))}}),[r]),Object(l.useEffect)((function(){if(r&&i){j(r,i).then((function(){T(k())}));var e=r.onProgramAccountChange(Object(E.b)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===b.a.span){var n=D(e.accountInfo.data);N.has(n.owner.toBase58())&&(_.add(t,e.accountInfo,w),T(k()))}}),"singleGossip");return function(){r.removeProgramAccountChangeListener(e)}}T([])}),[r,u,i,k]),f.a.createElement(h.Provider,{value:{userAccounts:y,nativeAccount:L}},n)}var C=function(){var t=Object(u.a)(c.a.mark((function t(n,a,o){var i,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(p.b)(a,99).map((function(e){return B(n,e,o)})));case 2:return i=t.sent,u=i.map((function(t){return t.array.map((function(t){if(t){var n=t.data,a=Object(r.a)(t,["data"]);return Object(s.a)(Object(s.a)({},a),{},{data:e.from(n[0],"base64")})}})).filter((function(e){return e}))})).flat(),t.abrupt("return",{keys:a,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(c.a.mark((function e(t,n,r){var a,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t._buildArgs([n],r,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",a);case 3:if(!(o=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+o.error.message);case 6:if(!o.result.value){e.next=9;break}return i=o.result.value,e.abrupt("return",{keys:n,array:i});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function R(e){var t=Object(d.c)(),n=Object(l.useState)(),r=Object(a.a)(n,2),o=r[0],i=r[1],c="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(l.useEffect)((function(){if(c){_.query(t,c,y).then((function(e){return i(e.info)})).catch((function(e){return console.log(e)}));var e=_.emitter.onCache((function(e){e.id===c&&_.query(t,c,y).then((function(e){return i(e.info)}))}));return function(){e()}}}),[t,c]),o}var D=function(e){var t=b.a.decode(e);return t.mint=new m.PublicKey(t.mint),t.owner=new m.PublicKey(t.owner),t.amount=b.c.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new b.c(0)):(t.delegate=new m.PublicKey(t.delegate),t.delegatedAmount=b.c.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=b.c.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new m.PublicKey(t.closeAuthority),t},M=function(e){if(e.length!==b.b.span)throw new Error("Not a valid Mint");var t=b.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new m.PublicKey(t.mintAuthority),t.supply=b.c.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new m.PublicKey(t.freezeAuthority),t}}).call(this,n(10).Buffer)},391:function(e,t,n){e.exports=n(640)},396:function(e,t,n){},397:function(e,t){},398:function(e,t){},420:function(e,t){},421:function(e,t){},521:function(e,t,n){},53:function(e,t,n){"use strict";n.d(t,"h",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return b}));n(19);var r=n(15),a=n(0),o=n(44),i=n.n(o);n(72),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function c(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),o=Object(r.a)(n,2),i=o[0],c=o[1],u=Object(a.useCallback)((function(t){i!==t&&(c(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[i,e]);return[i,u]}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function s(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(!a)return"N/A";var o=null===(n=e.get(a))||void 0===n?void 0:n.symbol;return o||(r?"".concat(a.substring(0,5),"..."):a)}function l(e,t){var n,r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(r)return null===(n=e.get(r))||void 0===n?void 0:n.logoURI}var f=new Set(["USDC","wUSDC","USDT"]);function d(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var r=Math.floor("number"===typeof e?e:i.a.isBN(e)?e.toNumber():e.info.amount.toNumber()),a=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return r/a*n}var b=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:9}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2})},558:function(e,t){},560:function(e,t){},571:function(e,t){},58:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return T}));var r=n(1),a=n.n(r),o=n(18),i=n(5),c=n(15),u=n(53),s=n(4),l=n(0),f=n.n(l),d=(n(173),n(643),n(117)),m=n(34),b=n(159),p=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/",chainID:b.a.MainnetBeta},{name:"testnet",endpoint:Object(s.clusterApiUrl)("testnet"),chainID:b.a.Testnet},{name:"devnet",endpoint:Object(s.clusterApiUrl)("devnet"),chainID:b.a.Devnet},{name:"localnet",endpoint:"http://127.0.0.1:8899",chainID:b.a.Devnet}],O=p[0].endpoint,E=f.a.createContext({endpoint:O,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new s.Connection(O,"recent"),sendConnection:new s.Connection(O,"recent"),env:p[0].name,tokens:[],tokenMap:new Map});function v(e){var t=e.children,n=void 0===t?void 0:t,r=Object(u.h)("connectionEndpts",p[0].endpoint),O=Object(c.a)(r,2),v=O[0],h=O[1],T=Object(u.h)("slippage",.25.toString()),A=Object(c.a)(T,2),g=A[0],y=A[1],w=Object(l.useMemo)((function(){return new s.Connection(v,"recent")}),[v]),I=Object(l.useMemo)((function(){return new s.Connection(v,"recent")}),[v]),_=p.find((function(e){return e.endpoint===v}))||p[0],L=_.name,S=Object(l.useState)([]),N=Object(c.a)(S,2),j=N[0],k=N[1],C=Object(l.useState)(new Map),B=Object(c.a)(C,2),R=B[0],D=B[1];return Object(l.useEffect)((function(){m.c.clear(),Object(i.a)(a.a.mark((function e(){var t,n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new b.b).resolve();case 2:return t=e.sent,n=t.filterByChainId(_.chainID).excludeByTag("nft").getList(),r=n.reduce((function(e,t){return e.set(t.address,t),e}),new Map),e.next=7,Object(m.d)(w,Object(o.a)(r.keys()),"single");case 7:(i=e.sent).keys.forEach((function(e,t){var n=i.array[t];n&&m.c.add(new s.PublicKey(e),n,m.b)})),D(r),k(n);case 11:case"end":return e.stop()}}),e)})))()}),[w,_]),Object(d.c)(L),Object(l.useEffect)((function(){var e=w.onAccountChange((new s.Keypair).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(l.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),Object(l.useEffect)((function(){var e=I.onAccountChange((new s.Keypair).publicKey,(function(){}));return function(){I.removeAccountChangeListener(e)}}),[I]),Object(l.useEffect)((function(){var e=I.onSlotChange((function(){return null}));return function(){I.removeSlotChangeListener(e)}}),[I]),f.a.createElement(E.Provider,{value:{endpoint:v,setEndpoint:h,slippage:parseFloat(g),setSlippage:function(e){return y(e.toString())},connection:w,sendConnection:I,tokens:j,tokenMap:R,env:L}},n)}function h(){return Object(l.useContext)(E).connection}function T(){var e=Object(l.useContext)(E);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}},580:function(e,t){},582:function(e,t){},609:function(e,t){},611:function(e,t){},617:function(e,t){},629:function(e,t){},632:function(e,t){},639:function(e,t){},640:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(36),i=n.n(o),c=(n(396),n(282),n(154)),u=n(54),s=n(55),l=n(58),f=n(34),d=n(1),m=n.n(d),b=n(5),p=n(18),O=n(15),E={},v=n(53),h=n(89),T=n(4),A=n(223),g=n(17),y=function(e,t){var n=h.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(g.a)({},t),info:n}},w=new T.PublicKey("EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"),I=function(e,t){var n=h.MARKETS.find((function(t){return t.address.equals(e)})),r=h.Market.getLayout((null===n||void 0===n?void 0:n.programId)||w).decode(t.data),a={pubkey:e,account:Object(g.a)({},t),info:r};return f.c.registerParser(a.info.baseMint,f.b),f.c.registerParser(a.info.quoteMint,f.b),f.c.registerParser(a.info.bids,y),f.c.registerParser(a.info.asks,y),a},_=n(91);function L(e,t){var n=Object(r.useMemo)((function(){return"string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58()}),[e]),a=Object(_.a)().userAccounts,o=Object(r.useState)(0),i=Object(O.a)(o,2),c=i[0],u=i[1],s=k(),l=s.marketEmitter,d=s.midPriceInUSD,m=Object(f.f)(n),b=Object(r.useMemo)((function(){return a.filter((function(e){return n===e.info.mint.toBase58()&&(!t||t.equals(e.pubkey))})).sort((function(e,t){return t.info.amount.sub(e.info.amount).toNumber()}))}),[a,n,t]),p=Object(r.useMemo)((function(){return b.reduce((function(e,t){return e+t.info.amount.toNumber()}),0)}),[b]),E=Object(r.useMemo)((function(){return Object(v.d)(p,m)}),[m,p]);return Object(r.useEffect)((function(){var e=function(){u(E*d(n||""))},t=l.onMarket((function(t){e()}));return e(),function(){t()}}),[E,d,l,n,u]),{balance:E,balanceLamports:p,balanceInUSD:c,accounts:b,hasBalance:b.length>0&&E>0}}var S=a.a.createContext(null),N=new A.a;function j(e){var t=e.children,n=void 0===t?null:t,o=Object(l.d)().endpoint,i=Object(r.useMemo)((function(){return new Map}),[]),c=Object(r.useState)([]),u=Object(O.a)(c,2),s=u[0],d=u[1],v=Object(_.a)().userAccounts,A=Object(r.useMemo)((function(){return new T.Connection(o,"recent")}),[o]),g=Object(r.useMemo)((function(){return Object(p.a)(new Set(s).values()).reduce((function(e,t){var n=t,r=h.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),a=E[n],o=h.MARKETS.filter((function(e){return!e.deprecated})).find((function(e){return e.name==="".concat(null===r||void 0===r?void 0:r.name,"/USDC")||e.name==="".concat(null===r||void 0===r?void 0:r.name,"/USDT")||e.address.toBase58()===a}));return o&&e.set(n,{marketInfo:o}),e}),new Map)}),[s]);Object(r.useEffect)((function(){var e=0,t=function(){var n=Object(b.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B(A,Object(p.a)(i.keys()));case 2:N.raiseMarketUpdated(new Set(Object(p.a)(g.keys()))),e=window.setTimeout((function(){return t()}),3e4);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return function(){var e=Object(b.a)(m.a.mark((function e(){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,Object(p.a)(g.keys()).forEach((function(e){var t=g.get(e);t&&n.set(t.marketInfo.address.toBase58(),e)})),r=Object(p.a)(g.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(f.d)(A,r.filter((function(e){return void 0===f.c.get(e)})),"single").then((function(e){var t=e.keys,a=e.array;return r.forEach((function(){})),a.map((function(e,r){var a=t[r],o=n.get(a);if(o){var i=g.get(o);if(i){var c=i.marketInfo.address;f.c.add(c,e,I)}}return e}))}));case 5:return a=new Set,r.forEach((function(e){var t=f.c.get(e);if(t){var n=t;f.c.get(n.info.baseMint)||a.add(n.info.baseMint.toBase58()),f.c.get(n.info.baseMint)||a.add(n.info.quoteMint.toBase58()),a.add(n.info.bids.toBase58()),a.add(n.info.asks.toBase58())}})),e.next=9,B(A,Object(p.a)(a.keys()));case 9:N.raiseMarketUpdated(new Set(Object(p.a)(g.keys()))),t();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(e)}}),[g,i,A]);var y=Object(r.useCallback)((function(e){var t;return C(null===(t=g.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[g]),w=Object(r.useCallback)((function(e){var t=g.get(e),n=f.c.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var r=n.info.bids.toBase58(),a=n.info.asks.toBase58();return i.set(r,(i.get(r)||0)+1),i.set(a,(i.get(a)||0)+1),function(){i.set(r,(i.get(r)||0)-1),i.set(a,(i.get(a)||0)-1),Object(p.a)(i.keys()).forEach((function(e){(i.get(e)||0)<=0&&i.delete(e)}))}}),[g,i]),L=Object(r.useCallback)((function(e){var t=Object(p.a)(new Set([].concat(Object(p.a)(s),Object(p.a)(e))).values());s.length!==t.length&&d(t)}),[d,s]);return Object(r.useEffect)((function(){L(v.map((function(e){return e.info.mint.toBase58()})))}),[v,L]),a.a.createElement(S.Provider,{value:{midPriceInUSD:y,marketEmitter:N,accountsToObserve:i,marketByMint:g,subscribeToMarket:w,precacheMarkets:L}},n)}var k=function(){return Object(r.useContext)(S)},C=function(e,t){var n,r,a,o,i=h.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(v.a.has((null===i||void 0===i?void 0:i.name)||""))return 1;if(!e)return 0;var c=f.c.get(e);if(!c)return 0;var u=c.info,s=(null===(n=f.c.get(u.baseMint))||void 0===n?void 0:n.info.decimals)||0,l=(null===(r=f.c.get(u.quoteMint))||void 0===r?void 0:r.info.decimals)||0,d=new h.Market(u,s,l,void 0,u.programId),m=null===(a=f.c.get(u.bids))||void 0===a?void 0:a.info,b=null===(o=f.c.get(u.asks))||void 0===o?void 0:o.info;return m&&b?function(e,t){var n=e.getL2(1),r=t.getL2(1);return n.length>0&&r.length>0?(n[0][0]+r[0][0])/2:0}(new h.Orderbook(d,m.accountFlags,m.slab),new h.Orderbook(d,b.accountFlags,b.slab)):0},B=function(){var e=Object(b.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(f.d)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var r=t[n];return f.c.add(new T.PublicKey(r),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=n(642),D=n(100),M=n(72),P=n(648),U=n(104),x=n(650),F=n(644),G=function(){var e=Object(s.b)(),t=e.connected,n=e.disconnect,r=Object(l.d)(),o=r.endpoint,i=r.setEndpoint;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{display:"grid"}},"Network:"," ",a.a.createElement(F.a,{onSelect:i,value:o,style:{marginBottom:20}},l.b.map((function(e){var t=e.name,n=e.endpoint;return a.a.createElement(F.a.Option,{value:n,key:n},t)}))),t&&a.a.createElement(U.a,{type:"primary",onClick:n},"Disconnect")))},W=function(e){var t=Object(s.b)().connected;return a.a.createElement("div",{className:"App-Bar-right"},a.a.createElement(D.c,{type:"primary"}),a.a.createElement("div",{style:{margin:5}}),t?a.a.createElement(D.a,{type:"ghost"}):null,a.a.createElement(P.a,{placement:"topRight",title:M.a.SETTINGS_TOOLTIP,content:a.a.createElement(G,null),trigger:"click"},a.a.createElement(U.a,{shape:"circle",size:"large",type:"text",icon:a.a.createElement(x.a,null)})),e.right)},K=R.a.Header,H=R.a.Content,q=a.a.memo((function(e){var t=e.children;return a.a.createElement(D.b,null,a.a.createElement("div",{className:"App wormhole-bg"},a.a.createElement(R.a,{title:M.a.APP_TITLE},a.a.createElement(K,{className:"App-Bar"},a.a.createElement(c.b,{to:"/"},a.a.createElement("div",{className:"app-title"},a.a.createElement("h2",null,"FILAMENT"))),a.a.createElement(W,null)),a.a.createElement(H,{style:{padding:"0 50px"}},t))))})),Y=n(647),Q=n(649),z=n(376),V=n.n(z),J=n(37),X=n.n(J),Z=(n(521),function(e){var t,n=e.style,o=e.className,i="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58(),c=Object(r.useRef)();return Object(r.useEffect)((function(){i&&c.current&&(c.current.innerHTML="",c.current.className=o||"",c.current.appendChild(V()((null===n||void 0===n?void 0:n.width)||16,parseInt(X.a.decode(i).toString("hex").slice(5,15),16))))}),[i,n,o]),a.a.createElement("div",{className:"identicon-wrapper",ref:c,style:e.style})}),$=function(e){var t,n,r=Object(l.d)().tokenMap,o=Object(v.e)(r,e.mintAddress),i=e.size||20;return o?a.a.createElement("img",{alt:"Token icon",className:e.className,key:o,width:(null===(t=e.style)||void 0===t?void 0:t.width)||i.toString(),height:(null===(n=e.style)||void 0===n?void 0:n.height)||i.toString(),src:o,style:Object(g.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"10rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):a.a.createElement(Z,{address:e.mintAddress,style:Object(g.a)({marginRight:"0.5rem",width:i,height:i,marginTop:2},e.style)})},ee=n(117),te=function(){var e=k(),t=e.marketEmitter,n=e.midPriceInUSD,o=Object(l.d)().tokenMap,i="SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt",u=L(i),s=L(ee.a),d=function(){var e=Object(_.a)().userAccounts,t=Object(r.useState)(0),n=Object(O.a)(t,2),a=n[0],o=n[1],i=k(),c=i.marketEmitter,u=i.midPriceInUSD;return Object(r.useEffect)((function(){var t=function(){for(var t=0,n=0;n<e.length;n++){var r=e[n],a=r.info.mint.toBase58(),i=f.c.get(a);if(i)t+=Object(v.d)(r.info.amount.toNumber(),i.info)*u(a)}o(t)},n=c.onMarket((function(e){t()}));return t(),function(){n()}}),[e,c,u,o]),{balanceInUSD:a,accounts:e,hasBalance:e.length>0&&a>0}}().balanceInUSD;return Object(r.useEffect)((function(){var e=t.onMarket((function(){}));return function(){e()}}),[t,n,o]),a.a.createElement(Y.a,{gutter:[16,16],align:"middle"},a.a.createElement(Q.a,{span:24},a.a.createElement("h2",null,"Your balances (",v.c.format(d),"):"),a.a.createElement("h2",null,"SOL: ",s.balance," (",v.c.format(s.balanceInUSD),")"),a.a.createElement("h2",{style:{display:"inline-flex",alignItems:"center"}},a.a.createElement($,{mintAddress:i})," SRM: ",null===u||void 0===u?void 0:u.balance," (",v.c.format(null===u||void 0===u?void 0:u.balanceInUSD),")")),a.a.createElement(Q.a,{span:12},a.a.createElement(D.c,{type:"ghost"})),a.a.createElement(Q.a,{span:12},a.a.createElement(c.b,{to:"/faucet"},a.a.createElement(U.a,null,"Faucet"))),a.a.createElement(Q.a,{span:24},a.a.createElement("div",{className:"builton"})))},ne=n(173),re=n(156),ae=n(645),oe=n(646),ie=function(e){var t=Object(D.d)().setVisible,n=Object(s.b)(),o=n.connected,i=n.connect,c=n.select,u=n.wallet,l=n.wallets,f=e.onClick,d=(e.children,e.disabled),m=e.allowWalletChange,b=Object(re.a)(e,["onClick","children","disabled","allowWalletChange"]),p=Object(r.useCallback)((function(e){o?null===f||void 0===f||f(e):t(!0)}),[t,f,o]),O=a.a.createElement(ae.a,null,l.map((function(e){return a.a.createElement(ae.a.Item,{key:e.name,onClick:function(){return c(e.name)}},"Change Wallet to ",e.name)})));return u&&m?a.a.createElement(oe.a.Button,{onClick:o?f:i,disabled:o&&d,overlay:O},M.a.CONNECT_LABEL):a.a.createElement(U.a,Object.assign({},b,{onClick:p,disabled:o&&d}),o?e.children:M.a.CONNECT_LABEL)},ce=function(){var e=Object(l.c)(),t=Object(s.b)().publicKey,n=Object(r.useCallback)(Object(b.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,e.requestAirdrop(t,2*T.LAMPORTS_PER_SOL);case 5:Object(ne.a)({message:M.a.ACCOUNT_FUNDED,type:"success"}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),Object(ne.a)({message:M.a.AIRDROP_FAIL,type:"error"}),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])}))),[t,e]);return a.a.createElement("div",{className:"flexColumn",style:{flex:1}},a.a.createElement("div",null,a.a.createElement("div",{className:"deposit-input-title",style:{margin:10}},M.a.FAUCET_INFO),a.a.createElement(ie,{type:"primary",onClick:n},M.a.GIVE_SOL)))},ue=n(120);function se(){var e=Object(r.useMemo)((function(){return[Object(ue.c)(),Object(ue.d)(),Object(ue.g)({options:{clientId:"BOM5Cl7PXgE9Ylq1Z1tqzhpydY0RVr8k90QQ85N7AKI5QGSrr9iDC-3rvmy0K_hF0JfpLMiXoDhta68JwcxS1LQ"}}),Object(ue.a)(),Object(ue.f)(),Object(ue.b)(),Object(ue.e)()]}),[]);return a.a.createElement(c.a,{basename:"/"},a.a.createElement(l.a,null,a.a.createElement(s.a,{wallets:e,autoConnect:!0},a.a.createElement(f.a,null,a.a.createElement(j,null,a.a.createElement(q,null,a.a.createElement(u.c,null,a.a.createElement(u.a,{exact:!0,path:"/",component:function(){return a.a.createElement(te,null)}}),a.a.createElement(u.a,{exact:!0,path:"/faucet",children:a.a.createElement(ce,null)}))))))))}var le=function(){return a.a.createElement(se,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var r={CONNECT_LABEL:"Connect",BORROWING_POWER_USED:"Borrowing Power Used",BORROWING_POWER_VALUE:"Borrowing Power",BORROWED_VALUE:"You borrowed",GIVE_SOL:"Give me SOL",LIQUIDATION_INFO:"This view displays all loans that can be liquidated. A liquidation is a process where borrower collateral does not cover value of the loan. It is represented by health factor falling below 1.0. When a loan is liquidated, an liquidator can purchase collateral at a discount by repaing the portio of the loan. ",FAUCET_INFO:"This faucet will help you fund your accounts outside of Solana main network.",ACCOUNT_FUNDED:"Account funded.",AIRDROP_FAIL:"Airdrop failed, please check you're not on mainnet or your localnet is running.",REPAY_QUESTION:"How much would you like to repay?",REPAY_ACTION:"Repay",RESERVE_STATUS_TITLE:"Reserve Status & Configuration",AUDIT_WARNING:"Oyster is an unaudited software project used for internal purposes at the Solana Foundation. This app is not for public use.",FOOTER:'This page was produced by the Solana Foundation ("SF") for internal educational and inspiration purposes only. SF does not encourage, induce or sanction the deployment, integration or use of Oyster or any similar application (including its code) in violation of applicable laws or regulations and hereby prohibits any such deployment, integration or use. Anyone using this code or a derivation thereof must comply with applicable laws and regulations when releasing related software.',MENU_HOME:"Home",MENU_DASHBOARD:"Dashboard",DASHBOARD_INFO:"Connect to a wallet to view your deposits/loans.",TRANSACTIONS_INFO:"Connect to a wallet to view your transactions.",NO_LOANS_NO_DEPOSITS:"No loans or deposits.",MENU_DEPOSIT:"Deposit",DEPOSITS:"Deposits",BORROWS:"Borrows",LOAN_TO_VALUE:"Loan to value",MENU_BORROW:"Borrow",MENU_LIQUIDATE:"Liquidate",MENU_FAUCET:"Faucet",MENU_TRANSACTION:"Transactions",MARGIN_TRADING:"Margin Trading",APP_TITLE:"Filament",CONNECT_BUTTON:"Connect",WALLET_TOOLTIP:"Wallet public key",WALLET_BALANCE:"Wallet balance",SETTINGS_TOOLTIP:"Settings",SELECT_COLLATERAL:"Select collateral",COLLATERAL:"Collateral",BORROW_QUESTION:"How much would you like to borrow?",BORROW_ACTION:"Borrow",NO_COLLATERAL:"No collateral",NO_DEPOSITS:"No deposits",NO_LOANS:"No loans",NOTHING_BORROWED:"Nothing borrowed yet",NOTHING_BORROWED_MESSAGE:"There will be a list of all the assets you have borrowed. For now, it's empty since you have not borrowed.",BORROW_NOW:"Borrow now",LIQUIDATE_QUESTION:"How much would you like to liquidate?",LIQUIDATE_ACTION:"Liquidate",LIQUIDATE_NO_LOANS:"There are no loans to liquidate.",TABLE_TITLE_ASSET:"Asset",TABLE_TITLE_YOUR_LOAN_BALANCE:"Loan balance",TABLE_TITLE_LOAN_BALANCE:"Loan balance",TABLE_TITLE_COLLATERAL_BALANCE:"Collateral",TABLE_TITLE_DEPOSIT_BALANCE:"Your deposits",TABLE_TITLE_APY:"APY",TABLE_TITLE_LTV:"LTV",TABLE_TITLE_HEALTH:"Health Factor",TABLE_TITLE_BORROW_APY:"Borrow APY",TABLE_TITLE_DEPOSIT_APY:"Deposit APY",TABLE_TITLE_TOTAL_BORROWED:"Total Borrowed",TABLE_TITLE_MARKET_SIZE:"Market Size",TABLE_TITLE_ACTION:"Action",TABLE_TITLE_DEPOSITS:"Deposits",TABLE_TITLE_WITHDRAWS:"Withdraws",TABLE_TITLE_BORROWS:"Borrows",TABLE_TITLE_REPAY_OBLIGATIONS:"Repay Obligations",TABLE_TITLE_LIQUIDATE_OBLIGATIONS:"Liquidate Obligations",MAX_LTV:"Maximum LTV",LIQUIDATION_THRESHOLD:"Liquidation threshold",LIQUIDATION_PENALTY:"Liquidation penalty",TABLE_TITLE_MAX_BORROW:"Available for you",DASHBOARD_TITLE_LOANS:"Loans",DASHBOARD_TITLE_DEPOSITS:"Deposits",DEPOSIT_QUESTION:"How much would you like to deposit?",WITHDRAW_ACTION:"Withdraw",WITHDRAW_QUESTION:"How much would you like to withdraw?",DASHBOARD_ACTION:"Go to dashboard",GO_BACK_ACTION:"Go back",DEPOSIT_ACTION:"Deposit",TOTAL_TITLE:"Total",TRADING_TABLE_TITLE_MY_COLLATERAL:"Chosen Collateral",TRADING_TABLE_TITLE_DESIRED_ASSET:"Desired Asset",TRADING_TABLE_TITLE_MULTIPLIER:"Leverage",TRADING_TABLE_TITLE_ASSET_PRICE:"Asset Price",TRADING_TABLE_TITLE_LIQUIDATION_PRICE:"Liquidation Price",TRADING_TABLE_TITLE_APY:"APY",TRADING_TABLE_TITLE_ACTIONS:"Action",TRADING_ADD_POSITION:"Add Position",MARGIN_TRADE_ACTION:"Margin Trade",MARGIN_TRADE_CHOOSE_COLLATERAL_AND_LEVERAGE:"Please choose your collateral and leverage.",MARGIN_TRADE_QUESTION:"Please choose how much of this asset you wish to purchase.",TABLE_TITLE_BUYING_POWER:"Total Buying Power",NOT_ENOUGH_MARGIN_MESSAGE:"Not enough buying power in oyster to make this trade at this leverage.",SET_MORE_MARGIN_MESSAGE:"You need more margin to match this leverage amount to make this trade.",LEVERAGE_LIMIT_MESSAGE:"You will need more margin to make this trade.",NO_DEPOSIT_MESSAGE:"You need to deposit coin of this type into oyster before trading with it on margin.",NO_COLL_TYPE_MESSAGE:"Choose Collateral CCY",SAFER:"Safer",RISKIER:"Riskier"},a=n(44),o=n.n(a),i=new o.a(10),c=(i.pow(new o.a(18)),i.pow(new o.a(18))),u=(i.pow(new o.a(27)),new o.a(0))},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(34);function a(){return{userAccounts:Object(r.e)().userAccounts}}}},[[391,1,2]]]);